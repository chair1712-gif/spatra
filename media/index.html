  <!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal Siswa - Galeri & Dashboard</title>
<style>
  /* --- RESET & DASAR --- */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 0;
    color: #333;
  }

  /* --- HEADER GLOBAL --- */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto 10px auto;
    padding: 20px 20px 10px 20px;
    border-bottom: 2px solid #e0e0e0;
    background: white;
    position: sticky;
    top: 0;
    z-index: 900;
  }

  h1 { margin: 0; font-size: 24px; color: #333; }

  /* Area Auth */
  #auth-section {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .btn-primary {
    background-color: #4f46e5;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s;
  }
  .btn-primary:hover { background-color: #4338ca; }
  .btn-logout { background-color: #ef4444; padding: 6px 15px; font-size: 13px; }
  .btn-logout:hover { background-color: #dc2626; }

  /* Profil User */
  .user-profile { display: flex; align-items: center; gap: 12px; animation: fadeIn 0.5s; }
  .user-avatar { width: 45px; height: 45px; border-radius: 50%; object-fit: cover; border: 2px solid #4f46e5; }
  .user-info { text-align: right; line-height: 1.2; }
  .user-name { font-weight: 700; font-size: 15px; color: #111; }
  .user-class { font-size: 12px; color: #666; }

  /* --- NAVIGASI UTAMA (Tabs Beranda / Dashboard) --- */
  .main-nav {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    gap: 10px;
    padding: 10px 20px;
    background: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .nav-btn {
    padding: 10px 25px;
    font-weight: 600;
    color: #666;
    background: transparent;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-size: 16px;
  }

  .nav-btn.active {
    color: #4f46e5;
    border-bottom: 3px solid #4f46e5;
  }

  /* --- CONTAINER UTAMA --- */
  .main-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }

  .view-section { display: none; animation: fadeInView 0.4s ease-in-out; }
  .view-section.active-view { display: block; }

  @keyframes fadeInView { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

  h2.section-title {
    font-size: 20px;
    color: #333;
    margin: 20px 0 15px 0;
    padding-left: 10px;
    border-left: 5px solid #4f46e5;
  }

  /* --- TAPS FILTER --- */
  .tabs-container { margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 10px; }
  .tab-btn {
    padding: 6px 16px;
    border: 1px solid #ddd;
    background: white;
    color: #555;
    border-radius: 20px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
  }
  .tab-btn:hover { background: #f0f0f0; }
  .tab-btn.active { background-color: #4f46e5; color: white; border-color: #4f46e5; }

  /* --- GALLERY HORIZONTAL (Untuk Galeri & Briev) --- */
  .gallery-wrapper {
    background: white;
    border-radius: 12px;
    padding: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    border: 1px solid #eee;
  }
  .gallery-row {
    display: flex;
    overflow-x: auto;
    gap: 20px;
    padding: 10px 5px 25px 5px;
    scroll-behavior: smooth;
  }
  .gallery-row::-webkit-scrollbar { height: 6px; }
  .gallery-row::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }

  /* --- CARD STYLE UMUM --- */
  .card {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    flex: 0 0 auto;
    width: 260px;
    display: flex;
    flex-direction: column;
    border: 1px solid #f0f0f0;
  }
  .card img { width: 100%; height: 160px; object-fit: cover; background: #f9f9f9; }
  .card .content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
  .card h3 { margin: 0 0 5px 0; font-size: 16px; color: #111; line-height: 1.3; }
  .card .meta { font-size: 12px; color: #777; margin-bottom: 10px; }
  .card .badge { display: inline-block; background: #f3f4f6; color: #4b5563; font-size: 10px; padding: 2px 6px; border-radius: 4px; margin-bottom: 8px; font-weight: 600; }
  .card button { margin-top: auto; width: 100%; padding: 8px; border: none; background: #f9fafb; color: #4f46e5; border-radius: 6px; cursor: pointer; border: 1px solid #e5e7eb; }
  .card button:hover { background: #eef2ff; }

  /* --- BOOTCAMP (NEWS STYLE) --- */
  .news-item {
    display: flex;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 15px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    border: 1px solid #eee;
    transition: transform 0.2s;
  }
  .news-item:hover { transform: scale(1.005); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
  
  .news-img {
    width: 200px;
    min-width: 200px;
    height: auto;
    object-fit: cover;
    background: #eee;
  }
  
  .news-content { padding: 20px; flex-grow: 1; }
  .news-date { font-size: 12px; color: #888; margin-bottom: 5px; display: block; }
  .news-title { font-size: 18px; font-weight: 700; margin: 0 0 10px 0; color: #111; }
  .news-desc { font-size: 14px; color: #555; line-height: 1.6; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

  /* --- TUTORIAL (YOUTUBE STYLE GRID) --- */
  .yt-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
  }

  .yt-card {
    background: transparent;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.2s;
  }
  .yt-card:hover { transform: scale(1.02); }

  .yt-thumb-container {
    position: relative;
    width: 100%;
    padding-top: 56.25%; /* 16:9 Aspect Ratio */
    background: #eee;
    border-radius: 12px;
    overflow: hidden;
  }

  .yt-thumb {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .yt-info { padding-top: 10px; }
  .yt-title { font-size: 16px; font-weight: 600; color: #111; margin: 0 0 5px 0; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  .yt-desc { font-size: 13px; color: #666; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

  /* --- MODAL & TOAST --- */
  .modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 1000;
  }
  .modal-overlay.open { display: flex; }
  .modal-box { background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 400px; position: relative; box-shadow: 0 20px 25px rgba(0,0,0,0.2); }
  .close-btn { background: none; border: none; font-size: 24px; cursor: pointer; color: #999; }
  .form-group { margin-bottom: 15px; }
  .form-group label { display: block; margin-bottom: 5px; font-size: 14px; font-weight: 600; }
  .form-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }

  .toast { position: fixed; bottom: 20px; right: 20px; background: #333; color: white; padding: 12px 24px; border-radius: 8px; display: none; z-index: 2000; }

  @media (max-width: 768px) {
    .news-item { flex-direction: column; }
    .news-img { width: 100%; height: 200px; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <h1>Portal Siswa</h1>
  <div id="auth-section">
    <button id="btnLogin" class="btn-primary" onclick="openModal('loginModal')">Login</button>
    <div id="userProfile" class="user-profile" style="display: none;">
      <div class="user-info">
        <div class="user-name" id="dispName">Nama Siswa</div>
        <div class="user-class" id="dispClass">Kelas X</div>
      </div>
      <img id="dispAvatar" class="user-avatar" src="" alt="Profile">
      <button id="btnUpload" class="btn-primary" onclick="openModal('uploadModal')" style="display: none;">+ Upload</button>
      <button id="btnLogout" class="btn-primary btn-logout" onclick="logout()">Logout</button>
    </div>
  </div>
</header>

<!-- NAVIGASI UTAMA -->
<nav class="main-nav">
  <button class="nav-btn active" onclick="switchView('home')">Beranda</button>
  <button class="nav-btn" onclick="switchView('dashboard')">Dashboard</button>
</nav>

<!-- MAIN CONTAINER -->
<div class="main-container">

  <!-- === VIEW 1: BERANDA (Galeri & Briev) === -->
  <div id="view-home" class="view-section active-view">
    
    <!-- SECTION GALERI -->
    <div class="section-gallery">
      <div id="tabs-gallery" class="tabs-container">
        <button class="tab-btn active" onclick="filterData('gallery', 'all')">Semua Galeri</button>
      </div>
      <div class="gallery-wrapper">
        <div id="loading">Memuat Galeri...</div>
        <div class="gallery-row" id="row-gallery" style="display: none;"></div>
      </div>
    </div>

    <!-- SECTION BRIEV -->
    <h2 class="section-title">Briev & Briefing</h2>
    <div class="section-briev">
      <div id="tabs-briev" class="tabs-container">
        <button class="tab-btn active" onclick="filterData('briev', 'all')">Semua Briev</button>
      </div>
      <div class="gallery-wrapper">
        <div id="loading-briev">Memuat Briev...</div>
        <div class="gallery-row" id="row-briev" style="display: none;"></div>
      </div>
    </div>
  </div>

  <!-- === VIEW 2: DASHBOARD (Bootcamp & Tutorial) === -->
  <div id="view-dashboard" class="view-section">
    
    <!-- SECTION BOOTCAMP (NEWS STYLE) -->
    <h2 class="section-title">Kegiatan Bootcamp</h2>
    <div id="loading-bootcamp" style="text-align:center; padding:20px;">Memuat Kegiatan...</div>
    <div id="container-bootcamp">
      <!-- Item Berita di-render di sini -->
    </div>

    <!-- SECTION TUTORIAL (YOUTUBE STYLE) -->
    <h2 class="section-title">Tutorial Video Online</h2>
    <div id="loading-tutorial" style="text-align:center; padding:20px;">Memuat Tutorial...</div>
    <div id="container-tutorial" class="yt-grid">
      <!-- Card YouTube di-render di sini -->
    </div>

  </div>

</div>

<!-- MODAL LOGIN -->
<div id="loginModal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-header"><h2>Login Siswa</h2><button class="close-btn" onclick="closeModal('loginModal')">&times;</button></div>
    <form onsubmit="handleLogin(event)">
      <div class="form-group"><label>Username</label><input type="text" id="username" required></div>
      <div class="form-group"><label>Password</label><input type="password" id="password" required></div>
      <button type="submit" class="btn-primary" style="width: 100%;" id="btnSubmitLogin">Masuk</button>
    </form>
  </div>
</div>

<!-- MODAL UPLOAD -->
<div id="uploadModal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-header"><h2>Upload ke Galeri</h2><button class="close-btn" onclick="closeModal('uploadModal')">&times;</button></div>
    <form onsubmit="handleUpload(event)">
      <div class="form-group"><label>Judul (Kolom E)</label><input type="text" id="uJudul" required></div>
      <div class="form-group"><label>Siswa (Kolom J)</label><input type="text" id="uSiswa" required></div>
      <div class="form-group"><label>Kategori (Kolom L)</label><input type="text" id="uKategori" required></div>
      <div class="form-group"><label>URL Gambar (Kolom F)</label><input type="url" id="uGambar" required></div>
      <button type="submit" class="btn-primary" style="width: 100%;">Simpan</button>
    </form>
  </div>
</div>

<div id="toast" class="toast">Notifikasi</div>

<script>
  const SHEET_ID = '1iOxHNN6Y5idBTF5QH0zzr3FTxK_YcToOx56KN9I2wlY';
  const GID_USERS = '23797909';

  // --- KONFIGURASI SECTION ---
  const CONFIG = {
    gallery: {
      gid: '921098100',
      query: 'SELECT E,F,J,L WHERE H>3',
      els: { tabs: 'tabs-gallery', row: 'row-gallery', loading: 'loading' },
      map: (row) => ({
        judul: row[0]?.v || 'Tanpa Judul',
        gambar: row[1]?.v || '',
        meta: row[2]?.v || 'Anonim',
        filter: row[3]?.v || 'Umum',
        type: 'Siswa'
      })
    },
    briev: {
      gid: '991020926',
      query: 'SELECT B,D,F,H WHERE B<>""',
      els: { tabs: 'tabs-briev', row: 'row-briev', loading: 'loading-briev' },
      map: (row) => {
        let imgRaw = row[2]?.v || '';
        let imgUrl = imgRaw;
        if (imgRaw && !imgRaw.startsWith('http')) { imgUrl = `https://drive.google.com/thumbnail?id=${imgRaw}&sz=w400`; }
        return {
          judul: row[0]?.v || 'Tanpa Judul',
          gambar: imgUrl,
          meta: row[1]?.v || 'Tgl N/A',
          filter: row[3]?.v || 'Umum',
          type: 'Briev'
        };
      }
    },
    bootcamp: {
      gid: '1880887156', // ID SHEET BOOTCAMP
      query: 'SELECT B,C,G,E WHERE B<>""',
      els: { container: 'container-bootcamp', loading: 'loading-bootcamp' },
      map: (row) => {
        // B=Judul, C=Waktu, D=Gambar, E=Keterangan
        let imgRaw = row[2]?.v || '';
        let imgUrl = imgRaw;
        if (imgRaw && !imgRaw.startsWith('http')) { imgUrl = `https://drive.google.com/thumbnail?id=${imgRaw}&sz=w800`; }
        return {
          judul: row[0]?.v || '',
          waktu: row[1]?.v || '',
          gambar: imgUrl,
          ket: row[3]?.v || ''
        };
      }
    },
    tutorial: {
      gid: '1819053111', // ID SHEET TUTORIAL
      query: 'SELECT B,C,G WHERE B<>""',
      els: { container: 'container-tutorial', loading: 'loading-tutorial' },
      map: (row) => {
        // B=Judul, C=Deskripsi, D=Image
        let imgRaw = row[2]?.v || '';
        let imgUrl = imgRaw;
        if (imgRaw && !imgRaw.startsWith('http')) { imgUrl = `https://drive.google.com/thumbnail?id=${imgRaw}&sz=w600`; }
        return {
          judul: row[0]?.v || '',
          deskripsi: row[1]?.v || '',
          gambar: imgUrl
        };
      }
    }
  };

  let dataStore = { gallery: [], briev: [], bootcamp: [], tutorial: [] };
  let currentUser = null;

  // --- 1. NAVIGASI VIEW ---
  function switchView(viewName) {
    // Hide all views
    document.getElementById('view-home').classList.remove('active-view');
    document.getElementById('view-dashboard').classList.remove('active-view');
    
    // Show selected view
    document.getElementById(`view-${viewName}`).classList.add('active-view');

    // Update Nav Buttons
    const btns = document.querySelectorAll('.nav-btn');
    btns.forEach(btn => btn.classList.remove('active'));
    if(viewName === 'home') btns[0].classList.add('active');
    else btns[1].classList.add('active');
  }

  // --- 2. LOGIN & AUTH ---
  async function handleLogin(e) {
    e.preventDefault();
    const userIn = document.getElementById('username').value;
    const passIn = document.getElementById('password').value;
    const credential = `${userIn}__${passIn}`;
    const btn = document.getElementById('btnSubmitLogin');
    
    btn.innerText = "Mengecek...";
    btn.disabled = true;

    try {
      const query = `SELECT B,C,H WHERE G = '${credential}'`;
      const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&gid=${GID_USERS}&tq=${encodeURIComponent(query)}`;

      const res = await fetch(url);
      const text = await res.text();
      const jsonStr = text.substring(text.indexOf('{'), text.lastIndexOf('}') + 1);
      const data = JSON.parse(jsonStr);

      if (data.table && data.table.rows && data.table.rows.length > 0) {
        const rowData = data.table.rows[0].c;
        currentUser = {
          nama: rowData[0]?.v || 'Siswa',
          kelas: rowData[1]?.v || '-',
          gambar: rowData[2]?.v || ''
        };
        loginSuccessUI(currentUser);
        closeModal('loginModal');
        showToast(`Selamat datang, ${currentUser.nama}`);
      } else {
        alert("Login Gagal! (Format: User__Pass)");
      }
    } catch (err) {
      console.error(err);
      alert("Gagal terkoneksi.");
    } finally {
      btn.innerText = "Masuk";
      btn.disabled = false;
    }
  }

  function loginSuccessUI(user) {
    document.getElementById('btnLogin').style.display = 'none';
    const profileDiv = document.getElementById('userProfile');
    profileDiv.style.display = 'flex';
    document.getElementById('dispName').textContent = user.nama;
    document.getElementById('dispClass').textContent = user.kelas;
    
    let imgUrl = user.gambar;
    if (imgUrl && !imgUrl.startsWith('http')) { imgUrl = `https://drive.google.com/thumbnail?id=${imgUrl}&sz=w100`; }
    if(!imgUrl) imgUrl = 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.nama);
    document.getElementById('dispAvatar').src = imgUrl;

    document.getElementById('btnUpload').style.display = 'block';
  }

  function logout() {
    currentUser = null;
    document.getElementById('userProfile').style.display = 'none';
    document.getElementById('btnLogin').style.display = 'block';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
    showToast("Logout.");
  }

  // --- 3. FETCH DATA UTAMA ---
  async function initAllData() {
    // Parallel fetch
    await Promise.all([
      fetchData('gallery'),
      fetchData('briev'),
      fetchData('bootcamp'),
      fetchData('tutorial')
    ]);
  }

  async function fetchData(sectionKey) {
    const config = CONFIG[sectionKey];
    const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&gid=${config.gid}&tq=${encodeURIComponent(config.query)}`;
    
    try {
      const res = await fetch(url);
      const text = await res.text();
      const jsonStr = text.substring(text.indexOf('{'), text.lastIndexOf('}') + 1);
      const data = JSON.parse(jsonStr);

      let results = [];
      if (data.table && data.table.rows) {
        results = data.table.rows.map(r => config.map(r.c));
      }

      dataStore[sectionKey] = results;
      
      // Render sesuai tipe section
      if(sectionKey === 'gallery' || sectionKey === 'briev') {
        renderTabs(sectionKey);
        renderRow(sectionKey);
        document.getElementById(config.els.loading).style.display = 'none';
        document.getElementById(config.els.row).style.display = 'flex';
      } 
      else if (sectionKey === 'bootcamp') {
        renderBootcamp();
      } 
      else if (sectionKey === 'tutorial') {
        renderTutorial();
      }

    } catch (e) {
      console.error(`Error loading ${sectionKey}:`, e);
      if(config.els.loading) document.getElementById(config.els.loading).innerText = "Gagal memuat data.";
    }
  }

  // --- 4. RENDER FUNGSI HOME (Galeri & Briev) ---
  function renderTabs(sectionKey) {
    const config = CONFIG[sectionKey];
    const container = document.getElementById(config.els.tabs);
    const data = dataStore[sectionKey];
    const uniqueFilters = [...new Set(data.map(item => item.filter))];
    
    container.innerHTML = `<button class="tab-btn active" onclick="filterData('${sectionKey}', 'all')">Semua</button>`;
    uniqueFilters.forEach(filter => {
      const btn = document.createElement('button');
      btn.className = 'tab-btn';
      btn.innerText = filter;
      btn.onclick = () => filterData(sectionKey, filter);
      container.appendChild(btn);
    });
  }

  function filterData(sectionKey, filterValue) {
    const config = CONFIG[sectionKey];
    const btns = document.getElementById(config.els.tabs).querySelectorAll('.tab-btn');
    btns.forEach(b => b.classList.toggle('active', b.innerText === filterValue));

    const filtered = (filterValue === 'all') 
      ? dataStore[sectionKey] 
      : dataStore[sectionKey].filter(i => i.filter === filterValue);
    
    renderRow(sectionKey, filtered);
  }

  function renderRow(sectionKey, data = dataStore[sectionKey]) {
    const config = CONFIG[sectionKey];
    const container = document.getElementById(config.els.row);
    
    if (data.length === 0) {
      container.innerHTML = '<div style="padding:20px; color:#888;">Data kosong.</div>';
      return;
    }

    container.innerHTML = data.map(item => {
      let metaLabel = (sectionKey === 'gallery') ? `Oleh: ${item.meta}` : `Exp: ${item.meta}`;
      return `
        <div class="card">
          <img src="${item.gambar}" alt="${item.judul}" onerror="this.src='https://via.placeholder.com/260x160?text=No+Image'">
          <div class="content">
            <div class="badge">${item.filter}</div>
            <h3>${item.judul}</h3>
            <div class="meta">${metaLabel}</div>
            <button onclick="showToast('${item.judul}')">Detail</button>
          </div>
        </div>
      `;
    }).join('');
    container.scrollLeft = 0;
  }

  // --- 5. RENDER FUNGSI DASHBOARD ---

  // Render Bootcamp (News Style)
  function renderBootcamp() {
    const data = dataStore.bootcamp;
    const container = document.getElementById('container-bootcamp');
    const loading = document.getElementById('loading-bootcamp');

    loading.style.display = 'none';

    if (data.length === 0) {
      container.innerHTML = '<p>Tidak ada kegiatan bootcamp.</p>';
      return;
    }

    container.innerHTML = data.map(item => `
      <div class="news-item">
        <img class="news-img" src="${item.gambar}" onerror="this.src='https://via.placeholder.com/200x200?text=News'">
        <div class="news-content">
          <span class="news-date">${item.waktu}</span>
          <h3 class="news-title">${item.judul}</h3>
          <p class="news-desc">${item.ket}</p>
        </div>
      </div>
    `).join('');
  }

  // Render Tutorial (Youtube Style)
  function renderTutorial() {
    const data = dataStore.tutorial;
    const container = document.getElementById('container-tutorial');
    const loading = document.getElementById('loading-tutorial');

    loading.style.display = 'none';

    if (data.length === 0) {
      container.innerHTML = '<p>Belum ada tutorial tersedia.</p>';
      return;
    }

    container.innerHTML = data.map(item => `
      <div class="yt-card" onclick="showToast('Putar video: ${item.judul}')">
        <div class="yt-thumb-container">
          <img class="yt-thumb" src="${item.gambar}" onerror="this.src='https://via.placeholder.com/320x180?text=Video'">
        </div>
        <div class="yt-info">
          <h3 class="yt-title">${item.judul}</h3>
          <p class="yt-desc">${item.deskripsi}</p>
        </div>
      </div>
    `).join('');
  }

  // --- 6. MODAL & UPLOAD ---
  function openModal(id) { document.getElementById(id).classList.add('open'); }
  function closeModal(id) { document.getElementById(id).classList.remove('open'); }
  window.onclick = (e) => { if(e.target.classList.contains('modal-overlay')) closeModal(e.target.id); }

  function handleUpload(e) {
    e.preventDefault();
    const newItem = {
      judul: document.getElementById('uJudul').value,
      gambar: document.getElementById('uGambar').value,
      meta: document.getElementById('uSiswa').value,
      filter: document.getElementById('uKategori').value,
      type: 'Siswa'
    };
    dataStore['gallery'].unshift(newItem);
    renderTabs('gallery');
    filterData('gallery', 'all');
    e.target.reset();
    closeModal('uploadModal');
    showToast("Karya ditambahkan.");
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.innerText = msg; t.style.display = 'block';
    setTimeout(() => t.style.display = 'none', 3000);
  }

  document.addEventListener('DOMContentLoaded', initAllData);
</script>

</body>
</html>
